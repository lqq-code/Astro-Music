---
import { getMusics } from "../../api";
import MusicComponent from "../components/Music";
import { ViewTransitions } from "astro:transitions";
import { fade } from "astro:transitions";

const musics = await getMusics(Astro.request);
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <ViewTransitions />
    <style>
      html,
      body {
        font-family: system-ui;
        margin: 0;
      }
      body {
        background-color: #141613;
      }
      ol,
      ul {
        list-style: none;
      }
      .music-contanier {
      }
      .music-item {
        background-color: #000;
        display: grid;
        gap: 8px;
        grid-template-areas:
          "left-sidebar main-view right-sidebar"
          "now-playing-bar now-playing-bar now-playing-bar";
        grid-template-columns: auto 1fr;
        grid-template-rows: 1fr auto;
        height: 100%;
        min-height: 100%;
        padding: 15px;
        position: relative;
        width: 100%;
      }
      .muisc-left {
        background-color: #000;
        grid-area: left-sidebar;
        position: relative;
        width: 350px;
		display: flex;
		flex-direction: column;
      }
      .muisc-left-menue {
        gap: 8px;
        height: 100%;
		flex-direction: column;
		min-height: 0;
      }
      .muisc-left-top {
        background-color: #121212;
        border-radius: 8px;
        cursor: default;
      }
	  .muisc-left-top a{
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		gap: 20px;
		height: 40px;
      }
	  .icon{
		fill: #fff;
	  }
      .muisc-left-top ul {
        padding: 8px 12px;
		color: #B3B3B3;
		display: block;
		font-size: 1rem;
      }
	  .muisc-left-top ul :hover{
		transition: 0.3s ease;
    	cursor: pointer;
		background: none;
		color: #fff;
		font-size: 1rem;
    	font-weight: 700;
      }
      .muisc-left-top li {
        padding: 4px 12px;
		background:  #121212;
      }
      .tab-title {
        color: #fff;
        font-size: 32px;
      }
    </style>
  </head>
  <body>
    <main class="music-contanier">
      <section
        class="music-item"
        transition:animate={fade({ duration: "0.4s" })}
      >
        <div class="muisc-left">
          <nav class="muisc-left-menue">
            <div class="muisc-left-top">
              <ul>
                <li>
                  <a
                    draggable="false"
                    aria-label="Home"
                    aria-current="page"
                    href="/"
                    aria-expanded="false"
                    ><svg
                      role="img"
                      height="24"
                      width="24"
                      aria-hidden="true"
                      class="icon home-icon"
                      viewBox="0 0 24 24"
                      data-encore-id="icon"
                      ><path
                        d="M12.5 3.247a1 1 0 0 0-1 0L4 7.577V20h4.5v-6a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v6H20V7.577l-7.5-4.33zm-2-1.732a3 3 0 0 1 3 0l7.5 4.33a2 2 0 0 1 1 1.732V21a1 1 0 0 1-1 1h-6.5a1 1 0 0 1-1-1v-6h-3v6a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.577a2 2 0 0 1 1-1.732l7.5-4.33z"
                      ></path></svg
                    ><span
                      data-encore-id="type"
                      class="Type__TypeElement-sc-goli3j-0 bkjCej">Home</span
                    ></a
                  >
                </li><li class="LU0q0itTx2613uiATSig InvalidDropTarget">
                  <a
                    draggable="false"
                    aria-label="Search"
                    href="/search"
                    aria-expanded="false"
                    ><svg
                      role="img"
                      height="24"
                      width="24"
                      aria-hidden="true"
                      class="icon search-icon"
                      viewBox="0 0 24 24"
                      data-encore-id="icon"
                      ><path
                        d="M10.533 1.279c-5.18 0-9.407 4.14-9.407 9.279s4.226 9.279 9.407 9.279c2.234 0 4.29-.77 5.907-2.058l4.353 4.353a1 1 0 1 0 1.414-1.414l-4.344-4.344a9.157 9.157 0 0 0 2.077-5.816c0-5.14-4.226-9.28-9.407-9.28zm-7.407 9.279c0-4.006 3.302-7.28 7.407-7.28s7.407 3.274 7.407 7.28-3.302 7.279-7.407 7.279-7.407-3.273-7.407-7.28z"
                      ></path></svg
                    ><span
                      data-encore-id="type"
                      class="Type__TypeElement-sc-goli3j-0 bkjCej">Search</span
                    ></a
                  >
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <div class="muisc-right">
          <h1 class="tab-title">OpenMusic</h1>
          <MusicComponent musics={musics} client:visible />
        </div>
      </section>
    </main>
  </body>
</html>
